(function(a){"use strict";a.extend(!0,a.ui.slider.prototype,{pips:function(c){function d(B){var C,D,E,F,G,H=[],I=0;if(m.values()&&m.values().length){for(E=m.values(),F=a.map(E,function(J){return Math.abs(J-B)}),G=Math.min.apply(Math,F),C=0;C<F.length;C++)F[C]===G&&H.push(C);for(I=H[0],D=0;D<H.length;D++)m._lastChangedValue===H[D]&&(I=H[D]);m.options.range&&2===H.length&&(B>E[1]?I=H[1]:B<E[0]&&(I=H[0]))}return I}function g(B,C){if(!m.option("disabled")){var D=a(B).data("value"),E=d(D);m.values()&&m.values().length?m.options.values[E]=m._trimAlignValue(D):m.options.value=m._trimAlignValue(D),m._refreshValue(),m._change(C,E)}}function l(B){var C,D,J,K,L,E=B,F="ui-slider-pip",G="",H=m.value(),I=m.values();if("first"===B?E=0:"last"==B&&(E=w),J=t+m.options.step*E,K=J.toString().replace(".","-"),L=E+t-t,C="array"===a.type(z.labels)?z.labels[L]||"":"object"===a.type(z.labels)?"first"===B?z.labels.first||"":"last"===B?z.labels.last||"":"array"===a.type(z.labels.rest)?z.labels.rest[L-1]||"":J:J,"first"===B?(D="0%",F+=" ui-slider-pip-first",F+="label"===z.first?" ui-slider-pip-label":"",F+=!1===z.first?" ui-slider-pip-hide":""):"last"===B?(D="100%",F+=" ui-slider-pip-last",F+="label"===z.last?" ui-slider-pip-label":"",F+=!1===z.last?" ui-slider-pip-hide":""):(D=(100/w*B).toFixed(4)+"%",F+="label"===z.rest?" ui-slider-pip-label":"",F+=!1===z.rest?" ui-slider-pip-hide":""),F+=" ui-slider-pip-"+K,I&&I.length){for(n=0;n<I.length;n++)J===I[n]&&(F+=" ui-slider-pip-initial-"+(n+1),F+=" ui-slider-pip-selected-"+(n+1));m.options.range&&J>I[0]&&J<I[1]&&(F+=" ui-slider-pip-inrange")}else J===H&&(F+=" ui-slider-pip-initial",F+=" ui-slider-pip-selected"),m.options.range&&("min"===m.options.range&&J<H||"max"===m.options.range&&J>H)&&(F+=" ui-slider-pip-inrange");return G="horizontal"===m.options.orientation?"left: "+D:"bottom: "+D,"<span class=\""+F+"\" style=\""+G+"\"><span class=\"ui-slider-line\"></span><span class=\"ui-slider-label\" data-value=\""+J+"\">"+z.formatLabel(C)+"</span></span>"}var n,o,q,s,y,m=this,r="",t=m._valueMin(),u=m._valueMax(),w=(u-t)/m.options.step,x=m.element.find(".ui-slider-handle"),z={first:"label",last:"label",rest:"pip",labels:!1,prefix:"",suffix:"",step:100<w?Math.floor(0.05*w):1,formatLabel:function(B){return this.prefix+B+this.suffix}};if("object"===a.type(c)||"undefined"===a.type(c))a.extend(z,c),m.element.data("pips-options",z);else return void("destroy"===c?function(){m.element.off(".selectPip").on("mousedown.slider",m.element.data("mousedown-original")).removeClass("ui-slider-pips").find(".ui-slider-pip").remove()}():"refresh"==c&&m.element.slider("pips",m.element.data("pips-options")));m.options.pipStep=Math.abs(Math.round(z.step))||1,m.element.off(".selectPip").addClass("ui-slider-pips").find(".ui-slider-pip").remove();var A={single:function(B){this.resetClasses(),y.filter(".ui-slider-pip-"+this.classLabel(B)).addClass("ui-slider-pip-selected"),m.options.range&&y.each(function(C,D){var E=a(D).children(".ui-slider-label").data("value");("min"===m.options.range&&E<B||"max"===m.options.range&&E>B)&&a(D).addClass("ui-slider-pip-inrange")})},range:function(B){for(this.resetClasses(),n=0;n<B.length;n++)y.filter(".ui-slider-pip-"+this.classLabel(B[n])).addClass("ui-slider-pip-selected-"+(n+1));m.options.range&&y.each(function(C,D){var E=a(D).children(".ui-slider-label").data("value");E>B[0]&&E<B[1]&&a(D).addClass("ui-slider-pip-inrange")})},classLabel:function(B){return B.toString().replace(".","-")},resetClasses:function(){var B=/(^|\s*)(ui-slider-pip-selected|ui-slider-pip-inrange)(-{1,2}\d+|\s|$)/gi;y.removeClass(function(C,D){return(D.match(B)||[]).join(" ")})}};for(r+=l("first"),q=m.options.pipStep;q<w;q+=m.options.pipStep)r+=l(q);for(r+=l("last"),m.element.append(r),y=m.element.find(".ui-slider-pip"),s=a._data(m.element.get(0),"events").mousedown&&a._data(m.element.get(0),"events").mousedown.length?a._data(m.element.get(0),"events").mousedown:m.element.data("mousedown-handlers"),m.element.data("mousedown-handlers",s.slice()),o=0;o<s.length;o++)"slider"===s[o].namespace&&m.element.data("mousedown-original",s[o].handler);m.element.off("mousedown.slider").on("mousedown.selectPip",function(B){var C=a(B.target),D=d(C.data("value")),E=x.eq(D);if(E.addClass("ui-state-active"),C.is(".ui-slider-label"))g(C,B),m.element.one("mouseup.selectPip",function(){E.removeClass("ui-state-active").focus()});else{var F=m.element.data("mousedown-original");F(B)}}),m.element.on("slide.selectPip slidechange.selectPip",function(B,C){var D=a(this),E=D.slider("value"),F=D.slider("values");C&&(E=C.value,F=C.values),m.values()&&m.values().length?A.range(F):A.single(E)})},float:function(c){function f(u){var w=[],x=a.map(u,function(y){return Math.ceil((y-m)/l.options.step)});if("array"===a.type(t.labels))for(g=0;g<u.length;g++)w[g]=t.labels[x[g]]||u[g];else if("object"===a.type(t.labels))for(g=0;g<u.length;g++)w[g]=u[g]===m?t.labels.first||m:u[g]===n?t.labels.last||n:"array"===a.type(t.labels.rest)?t.labels.rest[x[g]-1]||u[g]:u[g];else for(g=0;g<u.length;g++)w[g]=u[g];return w}var g,l=this,m=l._valueMin(),n=l._valueMax(),o=l._value(),q=l._values(),r=[],s=l.element.find(".ui-slider-handle"),t={handle:!0,pips:!1,labels:!1,prefix:"",suffix:"",event:"slidechange slide",formatLabel:function(u){return this.prefix+u+this.suffix}};if("object"===a.type(c)||"undefined"===a.type(c))a.extend(t,c),l.element.data("float-options",t);else return void("destroy"===c?function(){l.element.off(".sliderFloat").removeClass("ui-slider-float").find(".ui-slider-tip, .ui-slider-tip-label").remove()}():"refresh"==c&&l.element.slider("float",l.element.data("float-options")));if(o<m&&(o=m),o>n&&(o=n),q&&q.length)for(g=0;g<q.length;g++)q[g]<m&&(q[g]=m),q[g]>n&&(q[g]=n);if(l.element.addClass("ui-slider-float").find(".ui-slider-tip, .ui-slider-tip-label").remove(),t.handle)for(r=l.values()&&l.values().length?f(q):f([o]),g=0;g<r.length;g++)s.eq(g).append(a("<span class=\"ui-slider-tip\">"+t.formatLabel(r[g])+"</span>"));t.pips&&l.element.find(".ui-slider-label").each(function(u,w){var z,A,x=a(w),y=[x.data("value")];z=t.formatLabel(f(y)[0]),A=a("<span class=\"ui-slider-tip-label\">"+z+"</span>").insertAfter(x)}),"slide"!==t.event&&"slidechange"!==t.event&&"slide slidechange"!==t.event&&"slidechange slide"!==t.event&&(t.event="slidechange slide"),l.element.off(".sliderFloat").on(t.event+".sliderFloat",function(u,w){var x="array"===a.type(w.value)?w.value:[w.value],y=t.formatLabel(f(x)[0]);a(w.handle).find(".ui-slider-tip").html(y)})}})})(jQuery);