var EnvatoWizard=function(c){var e={install_child:function(t){(new n).init(t)},install_plugins:function(t){(new a).init(t)},install_content:function(t){(new i).init(t)}};function t(){c(".field-tooltip").on("hover",function(){c(this).find(".tip-content").toggle(350)}),c(".button-next").on("click",function(t){if(t.preventDefault(),!function(t){var a=jQuery(t);if("yes"==a.data("done-loading"))return!1;var n=a.text(),e=a.outerWidth(),i="⡀⡀⡀⡀⡀⡀⡀⡀⡀⡀⠄⠂⠁⠁⠂⠄",o=!1;a.css("width",e),a.addClass("dtbaker_loading_button_current");var s=a.is("input")||a.is("button")?"val":"text";a[s](i),a.data("done-loading","yes");var r=[0,1,2];return function t(){if(!o){for(var n="",e=0;e<r.length;e++)r[e]=r[e]+1,r[e]>=i.length&&(r[e]=0),n+=i.charAt(r[e]);a[s](n),setTimeout(function(){t()},60)}}(),{done:function(){o=!0,a[s](n),a.removeClass("dtbaker_loading_button_current"),a.attr("disabled",!1)}}}(this))return!1;var n=c(this).data("callback");return!n||void 0===e[n]||(e[n](this),!1)}),c(".theme-presets a").on("click",function(t){t.preventDefault(),c(this).parents("ul").first().find(".current").removeClass("current"),c(this).parents("li").first().addClass("current");var n=c(this).data("style");return c("#new_style").val(n),!1})}function n(){var n,e=c("#envato-setup-child-theme-text");function a(t){e.empty(),void 0!==t.done?(e.addClass("lead success"),e.html(t.message),n()):(e.addClass("lead error"),e.html(t.error))}return{init:function(t){n=function(){setTimeout(function(){window.location.href=t.href},1200)},childThemeName=c("#child_theme_name").val(),jQuery.post(envato_setup_params.ajaxurl,{action:"envato_setup_child_theme",wpnonce:envato_setup_params.wpnonce,cThemeName:childThemeName},a).fail(a)}}}function a(){var e,a,i=0,o="";function s(n,t,e){"object"==typeof n&&n.message?(a.find("span").text(n.message),n.url?(n.hash,jQuery.post(n.url,n,function(t){r(),a.find("span").text(n.message+envato_setup_params.verify_text)}).fail(s)):u()):("string"==typeof n&&0<=e.getResponseHeader("content-type").indexOf("text/html")?a.find("span").text("Success"):a.find("span").text("Error"),u())}function r(){o&&jQuery.post(envato_setup_params.ajaxurl,{action:"envato_setup_plugins",wpnonce:envato_setup_params.wpnonce,slug:o},s).fail(s)}function u(){var t=!1;a&&(a.data("done_item")||(i++,a.data("done_item",1)),a.find(".spinner").css("display","none"));var n=c(".envato-wizard-plugins li");n.each(function(){""==o||t?(o=c(this).data("slug"),a=c(this),r(),t=!1):c(this).data("slug")==o&&(t=!0)}),i>=n.length&&e()}return{init:function(t){c(".envato-wizard-plugins").addClass("installing"),e=function(){window.location.href=t.href},u()}}}function i(){var e,a,i=0,o="",s="";function r(t){var n=a.find("span");"object"==typeof t&&void 0!==t.message?(n.text(t.message),void 0!==t.url?t.hash===s?(n.text("Failed"),u()):(s=t.hash,jQuery.post(t.url,t,r).fail(r)):(t.done,u())):(console.log(t),n.text("Error"),u())}function u(){var t=!1;a&&(a.data("done_item")||(i++,a.data("done_item",1)),a.find(".spinner").css("display","none"));var n=c("tr.envato_default_content");c("tr.envato_default_content input:checked");n.each(function(){""==o||t?(o=c(this).data("content"),a=c(this),o&&(a.find("input:checkbox").is(":checked")?jQuery.post(envato_setup_params.ajaxurl,{action:"envato_setup_content",wpnonce:envato_setup_params.wpnonce,content:o},r).fail(r):(a.find("span").text("Skipped"),setTimeout(u,300))),t=!1):c(this).data("content")==o&&(t=!0)}),i>=n.length&&e()}return{init:function(t){c(".envato-setup-pages").addClass("installing"),c(".envato-setup-pages").find("input").prop("disabled",!0),e=function(){window.location.href=t.href},u()}}}return{init:function(){this,c(t)}}}(jQuery);EnvatoWizard.init();