!function(c,e){"use strict";if(!window.wp||!window.wp.customize)throw new ReferenceError("WordPress Customizer Javascript API is not accessible!");e.zoo=e.zoo||{};var u=wp.customize,p=c(document),i={setAttachment:function(e){this.attachment=e},addParamsURL:function(e,t){return c.isEmptyObject(t)||(e+=(0<=e.indexOf("?")?"&":"?")+c.param(t)),e},getThumb:function(e){void 0!==e&&(this.attachment=e);var t=(new Date).getTime();return void 0!==this.attachment.sizes&&void 0!==this.attachment.sizes.medium?this.addParamsURL(this.attachment.sizes.medium.url,{t:t}):this.addParamsURL(this.attachment.url,{t:t})},getURL:function(e){void 0!==e&&(this.attachment=e);var t=(new Date).getTime();return this.addParamsURL(this.attachment.url,{t:t})},getID:function(e){return void 0!==e&&(this.attachment=e),this.attachment.id},getInputID:function(e){c(".attachment-id",this.preview).val()},setPreview:function(e){this.preview=e},insertImage:function(e){void 0!==e&&(this.attachment=e);var t=this.getURL(),i=this.getID(),a=this.attachment.mime;c(".zoo-image-preview",this.preview).addClass("zoo-has-file").html('<img src="'+t+'" alt="">'),c(".attachment-url",this.preview).val(this.toRelativeUrl(t)),c(".attachment-mime",this.preview).val(a),c(".attachment-id",this.preview).val(i).trigger("change"),this.preview.addClass("attachment-added"),this.showChangeBtn()},toRelativeUrl:function(e){return e},showChangeBtn:function(){c(".zoo-add",this.preview).addClass("zoo-hide"),c(".zoo-change",this.preview).removeClass("zoo-hide"),c(".zoo-remove",this.preview).removeClass("zoo-hide")},insertVideo:function(e){void 0!==e&&(this.attachment=e);var t=this.getURL(),i=this.getID(),a=this.attachment.mime,o='<video width="100%" height="" controls><source src="'+t+'" type="'+a+'">Your browser does not support the video tag.</video>';c(".zoo-image-preview",this.preview).addClass("zoo-has-file").html(o),c(".attachment-url",this.preview).val(this.toRelativeUrl(t)),c(".attachment-mime",this.preview).val(a),c(".attachment-id",this.preview).val(i).trigger("change"),this.preview.addClass("attachment-added"),this.showChangeBtn()},insertFile:function(e){void 0!==e&&(this.attachment=e);var t=e.url,i=this.attachment.mime,a=t.replace(/^.*[\\\/]/,"");c(".zoo-image-preview",this.preview).addClass("zoo-has-file").html('<a href="'+t+'" class="attachment-file" target="_blank">'+a+"</a>"),c(".attachment-url",this.preview).val(this.toRelativeUrl(t)),c(".attachment-mime",this.preview).val(i),c(".attachment-id",this.preview).val(this.getID()).trigger("change"),this.preview.addClass("attachment-added"),this.showChangeBtn()},remove:function(e){void 0!==e&&(this.preview=e),c(".zoo-image-preview",this.preview).removeAttr("style").html("").removeClass("zoo-has-file"),c(".attachment-url",this.preview).val(""),c(".attachment-mime",this.preview).val(""),c(".attachment-id",this.preview).val("").trigger("change"),this.preview.removeClass("attachment-added"),c(".zoo-add",this.preview).removeClass("zoo-hide"),c(".zoo-change",this.preview).addClass("zoo-hide"),c(".zoo-remove",this.preview).addClass("zoo-hide")}};i.controlMediaImage=wp.media({title:wp.media.view.l10n.addMedia,multiple:!1,library:{type:"image"}}),i.controlMediaImage.on("select",function(){var e=i.controlMediaImage.state().get("selection").first().toJSON();i.insertImage(e)}),i.controlMediaVideo=wp.media({title:wp.media.view.l10n.addMedia,multiple:!1,library:{type:"video"}}),i.controlMediaVideo.on("select",function(){var e=i.controlMediaVideo.state().get("selection").first().toJSON();i.insertVideo(e)}),i.controlMediaFile=wp.media({title:wp.media.view.l10n.addMedia,multiple:!1}),i.controlMediaFile.on("select",function(){var e=i.controlMediaFile.state().get("selection").first().toJSON();i.insertFile(e)});var a={},s={devices:["desktop","mobile"],allDevices:["desktop","mobile"],type:"zoo",getTemplate:_.memoize(function(){var a=this,o={evaluate:/<#([\s\S]+?)#>/g,interpolate:/\{\{\{([\s\S]+?)\}\}\}/g,escape:/\{\{([^\}]+?)\}\}(?!\})/g,variable:"data"};return function(e,t,i){return _.isUndefined(t)&&(t="tmpl-zoo-customize-control-"+a.type),_.template(c("#"+t).html(),null,o)(e)}}),getFieldValue:function(a,e,o){var t=this,i=void 0,n=!1;_.isUndefined(e)||(i=e.type,n=e.device_settings);var s="";switch(i){case"media":case"image":case"video":case"attachment":case"audio":n?(s={},_.each(t.allDevices,function(e){var t=a+"-"+e;s[e]={id:c('input[data-name="'+t+'"]',o).val(),url:c('input[data-name="'+t+'-url"]',o).val(),mime:c('input[data-name="'+t+'-mime"]',o).val()}})):s={id:c('input[data-name="'+a+'"]',o).val(),url:c('input[data-name="'+a+'-url"]',o).val(),mime:c('input[data-name="'+a+'-mime"]',o).val()};break;case"css_rule":n?(s={},_.each(t.allDevices,function(e){var t=a+"-"+e;s[e]={unit:c('input[data-name="'+t+'-unit"]:checked',o).val(),top:c('input[data-name="'+t+'-top"]',o).val(),right:c('input[data-name="'+t+'-right"]',o).val(),bottom:c('input[data-name="'+t+'-bottom"]',o).val(),left:c('input[data-name="'+t+'-left"]',o).val(),link:c('input[data-name="'+t+'-link"]',o).is(":checked")?1:""}})):s={unit:c('input[data-name="'+a+'-unit"]:checked',o).val(),top:c('input[data-name="'+a+'-top"]',o).val(),right:c('input[data-name="'+a+'-right"]',o).val(),bottom:c('input[data-name="'+a+'-bottom"]',o).val(),left:c('input[data-name="'+a+'-left"]',o).val(),link:c('input[data-name="'+a+'-link"]',o).is(":checked")?1:""};break;case"shadow":n?(s={},_.each(t.allDevices,function(e){var t=a+"-"+e;s[e]={color:c('input[data-name="'+t+'-color"]',o).val(),x:c('input[data-name="'+t+'-x"]',o).val(),y:c('input[data-name="'+t+'-y"]',o).val(),blur:c('input[data-name="'+t+'-blur"]',o).val(),spread:c('input[data-name="'+t+'-spread"]',o).val(),inset:!!c('input[data-name="'+t+'-inset"]',o).is(":checked")&&1}})):s={color:c('input[data-name="'+a+'-color"]',o).val(),x:c('input[data-name="'+a+'-x"]',o).val(),y:c('input[data-name="'+a+'-y"]',o).val(),blur:c('input[data-name="'+a+'-blur"]',o).val(),spread:c('input[data-name="'+a+'-spread"]',o).val(),inset:!!c('input[data-name="'+a+'-inset"]',o).is(":checked")&&1};break;case"font_style":n?(s={},_.each(t.allDevices,function(e){var t=a+"-"+e;s[e]={b:c('input[data-name="'+t+'-b"]',o).is(":checked")?1:"",i:c('input[data-name="'+t+'-i"]',o).is(":checked")?1:"",u:c('input[data-name="'+t+'-u"]',o).is(":checked")?1:"",s:c('input[data-name="'+t+'-s"]',o).is(":checked")?1:"",t:c('input[data-name="'+t+'-t"]',o).is(":checked")?1:""}})):s={b:c('input[data-name="'+a+'-b"]',o).is(":checked")?1:"",i:c('input[data-name="'+a+'-i"]',o).is(":checked")?1:"",u:c('input[data-name="'+a+'-u"]',o).is(":checked")?1:"",s:c('input[data-name="'+a+'-s"]',o).is(":checked")?1:"",t:c('input[data-name="'+a+'-t"]',o).is(":checked")?1:""};break;case"font":if(n)s={},_.each(t.allDevices,function(e){var t=a+"-"+e,i={};c('.list-subsets[data-name="'+t+'-subsets"] input',o).each(function(){if(c(this).is(":checked")){var e=c(this).val();i[e]=e}}),s[e]={font:c('select[data-name="'+t+'-font"]',o).val(),type:c('input[data-name="'+t+'-type"]',o).val(),variant:c('select[data-name="'+t+'-variant"]',o).val(),subsets:i}});else{var l={};c('.list-subsets[data-name="'+a+'-subsets"] input',o).each(function(){if(c(this).is(":checked")){var e=c(this).val();l[e]=e}}),s={font:c('select[data-name="'+a+'-font"]',o).val(),type:c('input[data-name="'+a+'-type"]',o).val(),variant:c('select[data-name="'+a+'-variant"]',o).val(),subsets:l}}break;case"slider":n?(s={},_.each(t.allDevices,function(e){var t=a+"-"+e;s[e]={unit:c('input[data-name="'+t+'-unit"]:checked',o).val(),value:c('input[data-name="'+t+'-value"]',o).val()}})):s={unit:c('input[data-name="'+a+'-unit"]:checked',o).val(),value:c('input[data-name="'+a+'-value"]',o).val()};break;case"icon":n?(s={},_.each(t.allDevices,function(e){var t=a+"-"+e;s[e]={type:c('input[data-name="'+t+'-type"]',o).val(),icon:c('input[data-name="'+t+'"]',o).val()}})):s={type:c('input[data-name="'+a+'-type"]',o).val(),icon:c('input[data-name="'+a+'"]',o).val()};break;case"radio":case"text_align":case"text_align_no_justify":n?(s={},_.each(t.allDevices,function(e){var t=c('input[data-name="'+a+"-"+e+'"]:checked',o);s[e]=t.length?t.val():""})):s=c('input[data-name="'+a+'"]:checked',o).val();break;case"checkbox":n?(s={},_.each(t.allDevices,function(e){s[e]=c('input[data-name="'+a+"-"+e+'"]',o).is(":checked")?1:""})):s=c('input[data-name="'+a+'"]',o).is(":checked")?1:"";break;case"checkboxes":s={},n?_.each(t.allDevices,function(e){s[e]={},c('input[data-name="'+a+"-"+e+'"]',o).each(function(){var e=c(this).val();c(this).is(":checked")&&(s[e]=e)})}):c('input[data-name="'+a+'"]',o).each(function(){var e=c(this).val();c(this).is(":checked")&&(s[e]=e)});break;case"typography":case"modal":case"styling":n?(s={},_.each(t.allDevices,function(e){s[e]=c('[data-name="'+a+"-"+e+'"]',o).val()})):s=c('[data-name="'+a+'"]',o).val();try{s=JSON.parse(s)}catch(e){}break;default:n?(s={},_.each(t.allDevices,function(e){s[e]=c('[data-name="'+a+"-"+e+'"]',o).val()})):s=c('[data-name="'+a+'"]',o).val()}return s},getValue:function(n,o){var s=this,l="";switch(n.type){case"group":l={},n.device_settings?_.each(s.allDevices,function(e){var i=c(".zoo-group-device-fields.zoo-for-"+e,o);l[e]={};var a={};_.each(n.fields,function(e){var t=c('.zoo-group-field[data-field-name="'+e.name+'"]',i);a[e.name]=s.getFieldValue(e.name,e,t)}),l[e]=a,s.initConditional(i,a)}):(_.each(n.fields,function(e){var t=c('.zoo-group-field[data-field-name="'+e.name+'"]',o);l[e.name]=s.getFieldValue(e.name,e,t)}),s.initConditional(o,l));break;case"repeater":l=[],c(".zoo-repeater-item",o).each(function(e){var a=c(this),o={};_.each(n.fields,function(e){var t=c('[data-field-name="'+e.name+'"]',a),i=s.getFieldValue(e.name,e,a);o[e.name]=i,n.live_title_field==e.name&&("select"==t.prop("tagName")?i=c('option[value="'+i+'"]').first().text():(_.isUndefined(i)||""==i)&&(i=ZooCustomizeBuilderData.untitled),s.updateRepeaterLiveTitle(i,a,e))}),s.initConditional(a,o),l[e]=o,l[e]._visibility="visible",c("input.r-visible-input",a).length&&(c("input.r-visible-input",a).is(":checked")||(l[e]._visibility="hidden"))});break;default:l=this.getFieldValue(n.name,n,o)}return l},encodeValue:function(e){return encodeURI(JSON.stringify(e))},decodeValue:function(e){return JSON.parse(decodeURI(e))},updateRepeaterLiveTitle:function(e,t,i){c(".zoo-repeater-live-title",t).text(e)},compare:function(e,t,i){var a=!1;switch(t){case"==":a=e==i;break;case"===":a=e===i;break;case">":a=i<e;break;case"<":a=e<i;break;case"!=":a=e!=i;break;case"!==":a=e!==i;break;case"empty":var o=_.clone(e);a=_.isObject(o)||_.isArray(o)?(_.each(o,function(e,t){_.isEmpty(e)&&delete o[t]}),!!_.isEmpty(o)):!(!_.isNull(o)&&""!=o);break;case"not_empty":o=_.clone(e);(_.isObject(o)||_.isArray(o))&&_.each(o,function(e,t){_.isEmpty(e)&&delete o[t]}),a=!_.isEmpty(o);break;default:a=_.isArray(i)?!_.isEmpty(i)&&!_.isEmpty(e)&&_.contains(i,e):e==i}return a},multiple_compare:function(e,s,l){_.isUndefined(l)&&(l=!1);var r=this,d=!1;try{var t=e[0];if(_.isString(t)){d=!1;var i,a=e[1],o=e[2],n=!1;n=_.isUndefined(e[3])?u.previewedDevice.get():e[3],_.isUndefined(s[t])||(i=s[t],l&&(i=r.decodeValue(i)),_.isObject(i)&&!_.isUndefined(i[n])&&(i=i[n]),d=r.compare(i,a,o))}else _.isArray(t)&&(d=!0,_.each(e,function(e){var t=e[0],i=e[1],a=e[2],o=!1;_.isUndefined(e[3])||(o=e[3]);var n=s[t];if(_.isUndefined(n)&&(n=""),l&&_.isString(n))try{n=r.decodeValue(n)}catch(e){}o&&_.isObject(n)&&!_.isUndefined(n[o])&&(n=n[o]),r.compare(n,i,a)||(d=!1)}))}catch(e){}return d},initConditional:function(e,i){var a=this;c(".zoo-customize-control",e).each(function(){var e=c(this),t=e.attr("data-required")||!1;!_.isUndefined(t)&&t&&(t=JSON.parse(t),a.multiple_compare(t,i)?e.removeClass("zoo-hide"):e.addClass("zoo-hide"))})},addRepeaterItem:function(o,n,e,s){_.isObject(n)||(n={});var l=this,t=l.getTemplate(),i=o.fields,r=!0,a=o.title_only;!1===o.addable&&(r=!1);var d=c(t(o,"tmpl-customize-control-repeater-layout"));return e.find(".zoo-settings-fields").append(d),_.each(i,function(e,t){var i;e.value="",e.addable=r,_.isUndefined(n[e.name])||(e.value=n[e.name]),i=c('<div class="zoo-repeater-field"></div>'),c(".zoo-repeater-item-inner",d).append(i),l.add(e,i,function(){_.isFunction(s)&&s()});var a=e.value;o.live_title_field===e.name&&("select"===e.type?a=e.choices[e.value]:(_.isUndefined(a)||""==a)&&(a=ZooCustomizeBuilderData.untitled),l.updateRepeaterLiveTitle(a,d,e))}),_.isUndefined(n._visibility)||"hidden"!==n._visibility?d.find("input.r-visible-input").prop("checked","checked"):(d.addClass("item-hidden"),d.find("input.r-visible-input").removeAttr("checked")),a&&c(".zoo-repeater-item-settings, .zoo-repeater-item-toggle",d).hide(),p.trigger("zoo/customizer/repeater/add",[d,l]),d},limitRepeaterItems:function(e,t){},initRepeater:function(t,o,n){var i=this;(t=_.defaults(t,{addable:null,title_only:null,limit:null,live_title_field:null,fields:null})).limit=parseInt(t.limit),isNaN(t.limit)&&(t.limit=0),o.find(".zoo-settings-fields").sortable({handle:".zoo-repeater-item-heading",containment:"parent",update:function(e,t){_.isFunction(n)&&n()}}),o.on("click",".zoo-repeater-reorder",function(e){e.preventDefault(),c(".zoo-repeater-items",o).toggleClass("reorder-active"),c(".zoo-repeater-add-new",o).toggleClass("disabled"),c(".zoo-repeater-items",o).hasClass("reorder-active")?c(this).html(c(this).data("done")):c(this).html(c(this).data("text"))}),o.on("click",".zoo-repeater-item .zoo-up",function(e){e.preventDefault();var t=c(this).closest(".zoo-repeater-item");if(0<t.index()){var i=t.prev();t.insertBefore(i),_.isFunction(n)&&n()}}),o.on("click",".zoo-repeater-item .zoo-down",function(e){e.preventDefault();var t=c(".zoo-repeater-items .zoo-repeater-item",o).length,i=c(this).closest(".zoo-repeater-item");if(i.index()<t-1){var a=i.next();i.insertAfter(a),_.isFunction(n)&&n()}}),_.isArray(t.value)&&_.each(t.value,function(e){i.addRepeaterItem(t,e,o,n)}),i.limitRepeaterItems(),o.on("change",".zoo-repeater-item .r-visible-input",function(e){e.preventDefault();var t=c(this).closest(".zoo-repeater-item");c(this).is(":checked")?t.removeClass("item-hidden"):t.addClass("item-hidden")}),t.title_only||o.on("click",".zoo-repeater-item-toggle, .zoo-repeater-live-title",function(e){e.preventDefault(),c(this).closest(".zoo-repeater-item").toggleClass("zoo-open")}),o.on("click",".zoo-remove",function(e){e.preventDefault(),c(this).closest(".zoo-repeater-item").remove(),p.trigger("zoo/customizer/repeater/remove",[i]),_.isFunction(n)&&n(),i.limitRepeaterItems()});var a={};_.each(t.fields,function(e,t){a[e.name]=null,_.isUndefined(e.default)||(a[e.name]=e.default)}),o.on("click",".zoo-repeater-add-new",function(e){e.preventDefault(),c(this).hasClass("disabled")||(i.addRepeaterItem(t,a,o,n),_.isFunction(n)&&n(),i.limitRepeaterItems())})},add:function(n,s,e){var t=this,l=t.getTemplate(),r="tmpl-zoo-customize-control-"+n.type;if(0==c("#"+r).length&&(r="tmpl-zoo-customize-control-default"),n.device_settings){var d=null;_.each(t.devices,function(e,t){var i=_.clone(n);i.original_name=n.name,_.isObject(n.value)?_.isUndefined(n.value[e])?i.value="":i.value=n.value[e]:(i.value="",0===t&&(i.value=n.value)),i.name=n.name+"-"+e,i._current_device=e;var a=c(l(i,r,"field")),o=a.find(".zoo-customize-control-settings-inner").first();d||s.append(a).addClass("zoo-multiple-devices"),o.addClass("zoo-for-"+e),o.attr("data-for-device",e),d&&(o.insertAfter(d),d=o),d=o})}else{n.original_name=n.name;var i=l(n,r,"field");s.html(i)}if("repeater"===n.type){var a=c(l(n,"tmpl-customize-control-repeater-inner"));s.find(".zoo-customize-control-settings-inner").replaceWith(a),t.initRepeater(n,a,e)}switch(n.css_format&&_.isString(n.css_format)&&0<n.css_format.indexOf("value_no_unit")&&(s.find(".zoo-slider-input").addClass("no-unit"),c(".zoo-css-unit .zoo-label-active",s).hide()),n.type){case"color":case"shadow":t.initColor(s);break;case"image":case"video":case"audio":case"attchment":case"file":t.initMedia(s);break;case"slider":t.initSlider(s);break;case"css_rule":t.initCSSRuler(s,e)}},addFields:function(e,a,o,n){var s=this;_.isObject(a)||(a={}),_.each(e,function(e,t){_.isUndefined(e.class)&&(e.class="");var i=c('<div class="zoo-group-field ft--'+e.type+" "+e.class+'" data-field-name="'+e.name+'"></div>');o.append(i),e.original_name=e.name,_.isUndefined(a[e.name])?_.isUndefined(e.default)?e.value=null:e.value=e.default:e.value=a[e.name],s.add(e,i,n)})},initSlider:function(e){0<c(".zoo-input-slider",e).length&&c(".zoo-input-slider",e).each(function(){var i=c(this),e=i.parent(),a=c(".zoo-slider-input",e),t=i.data("min")||0,o=i.data("max")||300,n=i.data("step")||1;_.isNumber(t)||(t=0),_.isNumber(o)||(o=300),_.isNumber(n)||(n=1);var s=a.val();i.slider({range:"min",value:s,step:n,min:t,max:o,slide:function(e,t){a.val(t.value).trigger("data-change")}}),a.on("change",function(){i.slider("value",c(this).val())});var l=i.closest(".zoo-input-slider-wrapper");l.on("click",".reset",function(e){e.preventDefault();var t=i.data("default");_.isObject(t)||(t={unit:"px",value:""}),c(".zoo-slider-input",l).val(t.value),i.slider("option","value",t.value),c('.zoo-css-unit input.zoo-input[value="'+t.unit+'"]',l).trigger("click"),c(".zoo-slider-input",l).trigger("change")})})},initMedia:function(e){e.on("click",".zoo-media .zoo-add, .zoo-media .zoo-change, .zoo-media .zoo-image-preview",function(e){e.preventDefault();var t=c(this).closest(".zoo-media");i.setPreview(t),i.controlMediaImage.open()}),e.on("click",".zoo-media .zoo-remove",function(e){e.preventDefault();var t=c(this).closest(".zoo-media");i.remove(t)})},initCSSRuler:function(t,i){t.on("change",".zoo-label-parent",function(){if("radio"==c(this).attr("type")){var e=c(this).attr("name");c('input[name="'+e+'"]',t).parent().removeClass("zoo-label-active")}c(this).is(":checked")?c(this).parent().addClass("zoo-label-active"):c(this).parent().removeClass("zoo-label-active"),_.isFunction(i)&&i()}),t.on("change keyup",".zoo-css-ruler .zoo-input-css",function(){var e=c(this).closest(".zoo-css-ruler");if(c(".zoo-css-ruler-link input",e).is(":checked")){var t=c(this).val();c(".zoo-input-css",e).not(c(this)).each(function(){c(this).is(":disabled")||c(this).val(t)})}_.isFunction(i)&&i()})},initColor:function(e){c(".zoo-input-color",e).each(function(){var a=c(this),e=a.data("default")||"",o=c(".zoo-input--color",a).val();c(".zoo-color-panel",a).attr("data-alpha","true"),c(".zoo-color-panel",a).wpColorPicker({defaultColor:e,change:function(e,t){var i=t.color.toString();c(".zoo-input--color",a).val(i),t.color.toString()!==o&&(o=i,c(".zoo-input--color",a).trigger("change"))},clear:function(e,t){c(".zoo-input--color",a).val(""),c(".zoo-input--color",a).trigger("data-change")}})})}},t={devices:["desktop","mobile"],type:"zoo",settingField:null,getTemplate:_.memoize(function(){var a=this,o={evaluate:/<#([\s\S]+?)#>/g,interpolate:/\{\{\{([\s\S]+?)\}\}\}/g,escape:/\{\{([^\}]+?)\}\}(?!\})/g,variable:"data"};return function(e,t,i){return _.isUndefined(t)&&(t="tmpl-zoo-customize-control-"+a.type),_.template(c("#"+t).html(),null,o)(e)}}),init:function(){var e=this;switch(_.isArray(e.params.devices)&&!_.isEmpty(e.params.devices)&&(e.devices=e.params.devices),e.settingField=e.container.find("[data-customize-setting-link]").first(),e.params.setting_type){case"group":e.initGroup();break;case"repeater":e.initRepeater();break;default:e.initField()}e.container.on("change keyup data-change","input:not(.change-by-js), select:not(.change-by-js), textarea:not(.change-by-js)",function(){e.getValue()})},addParamsURL:function(e,t){return c.isEmptyObject(t)||(e+=(0<=e.indexOf("?")?"&":"?")+c.param(t)),e},compare:s.compare,multiple_compare:s.multiple_compare,initConditional:s.initConditional,getValue:function(e){var t,i=this,a={type:i.params.setting_type,name:i.id,value:i.params.value,default:i.params.default,devices:i.params.devices};return"slider"===a.type&&(a.min=i.params.min,a.max=i.params.max,a.step=i.params.step,a.unit=i.params.unit),"css_rule"===a.type&&(a.fields_disabled=i.params.fields_disabled),"group"!==a.type&&"repeater"!==a.type||(a.fields=i.params.fields,a.live_title_field=i.params.live_title_field),"select"!==i.params.setting_type&&"radio"!==i.params.setting_type||(a.choices=i.params.choices),"checkbox"===i.params.setting_type&&(a.checkbox_label=i.params.checkbox_label),a.device_settings=i.params.device_settings,t=s.getValue(a,c(".zoo-settings-fields",i.container)),(_.isUndefined(e)||e)&&(i.setting.set(i.encodeValue(t)),_.isArray(i.params.reset_controls)&&_.each(i.params.reset_controls,function(e){try{var t=u.control(e);t.setting.set(i.encodeValue(t.params.default))}catch(e){}}),p.trigger("zoo/customizer/value_changed",[i,t])),t},encodeValue:function(e){return encodeURI(JSON.stringify(e))},decodeValue:function(e){var t=!1;try{t=JSON.parse(decodeURI(e))}catch(e){}return t||e},updateRepeaterLiveTitle:function(e,t,i){c(".zoo-repeater-live-title",t).text(e)},initGroup:function(){var o=this;o.params.device_settings?(o.container.find(".zoo-settings-fields").addClass("zoo-multiple-devices"),_.isObject(o.params.value)||(o.params.value={}),_.each(o.devices,function(e,t){var i=c('<div class="zoo-group-device-fields zoo-customize-control-settings-inner zoo-for-'+e+'"></div>');o.container.find(".zoo-settings-fields").append(i);var a={};_.isUndefined(o.params.value[e])||(a=o.params.value[e]),_.isObject(a)||(a={}),s.addFields(o.params.fields,a,i,function(){o.getValue()})})):s.addFields(o.params.fields,o.params.value,o.container.find(".zoo-settings-fields"),function(){o.getValue()}),o.getValue(!1)},addField:function(e,t,i){s.devices=_.clone(this.devices),s.add(e,t,i)},initField:function(){var e=this,t=_.clone(e.params);"slider"==(t=_.extend(t,{type:e.params.setting_type,name:e.id,value:e.params.value,default:e.params.default,devices:e.params.devices,unit:e.params.unit,title:null,label:null,description:null})).type&&(t.min=e.params.min,t.max=e.params.max,t.step=e.params.step),"css_rule"==t.type&&(t.fields_disabled=e.params.fields_disabled),"select"!=e.params.setting_type&&"radio"!=e.params.setting_type||(t.choices=e.params.choices),"checkbox"==e.params.setting_type&&(t.checkbox_label=e.params.checkbox_label),t.device_settings=e.params.device_settings;var i=e.container.find(".zoo-settings-fields");e.addField(t,i,function(){e.getValue()})},addRepeaterItem:function(a){_.isObject(a)||(a={});var o=this,e=o.getTemplate(),t=o.params.fields,n=!0,i=o.params.title_only;!1===o.params.addable&&(n=!1);var s=c(e(o.params,"tmpl-customize-control-repeater-item"));return o.container.find(".zoo-settings-fields").append(s),_.each(t,function(e,t){var i;e.value="",e.addable=n,_.isUndefined(a[e.name])||(e.value=a[e.name]),i=c('<div class="zoo-repeater-field"></div>'),c(".zoo-repeater-item-inner",s).append(i),o.addField(e,i,function(){o.getValue()})}),_.isUndefined(a._visibility)||"hidden"!==a._visibility?s.find("input.r-visible-input").prop("checked","checked"):(s.addClass("item-hidden"),s.find("input.r-visible-input").removeAttr("checked")),i&&c(".zoo-repeater-item-settings, .zoo-repeater-item-toggle",s).hide(),p.trigger("zoo/customizer/repeater/add",[s,o]),s},limitRepeaterItems:function(){var e=this,t=c(".zoo-repeater-add-new",e.container),i=c(".zoo-settings-fields .zoo-repeater-item",e.container).length;0<e.params.limit&&(i>=e.params.limit?(t.addClass("zoo-hide"),e.params.limit_msg&&(0===c(".zoo-limit-item-msg",e.container).length?c('<p class="zoo-limit-item-msg">'+e.params.limit_msg+"</p>").insertBefore(t):c(".zoo-limit-item-msg",e.container).removeClass("zoo-hide"))):(c(".zoo-limit-item-msg",e.container).addClass("zoo-hide"),t.removeClass("zoo-hide"))),0<i?c(".zoo-repeater-reorder",e.container).removeClass("zoo-hide"):c(".zoo-repeater-reorder",e.container).addClass("zoo-hide")},initRepeater:function(){var o=this;o.params.limit=parseInt(o.params.limit),isNaN(o.params.limit)&&(o.params.limit=0),o.container.find(".zoo-settings-fields").sortable({handle:".zoo-repeater-item-heading",containment:"parent",update:function(e,t){o.getValue()}}),o.container.on("click",".zoo-repeater-reorder",function(e){e.preventDefault(),c(".zoo-repeater-items",o.container).toggleClass("reorder-active"),c(".zoo-repeater-add-new",o.container).toggleClass("disabled"),c(".zoo-repeater-items",o.container).hasClass("reorder-active")?c(this).html(c(this).data("done")):c(this).html(c(this).data("text"))}),o.container.on("click",".zoo-repeater-item .zoo-up",function(e){e.preventDefault();var t=c(this).closest(".zoo-repeater-item");if(0<t.index()){var i=t.prev();t.insertBefore(i),o.getValue()}}),o.container.on("click",".zoo-repeater-item .zoo-down",function(e){e.preventDefault();var t=c(".zoo-repeater-items .zoo-repeater-item",o.container).length,i=c(this).closest(".zoo-repeater-item");if(i.index()<t-1){var a=i.next();i.insertAfter(a),o.getValue()}}),_.isArray(o.params.value)&&(_.each(o.params.value,function(e){o.addRepeaterItem(e)}),o.getValue(!1)),o.limitRepeaterItems(),o.container.on("change",".zoo-repeater-item .r-visible-input",function(e){e.preventDefault();var t=c(this).closest(".zoo-repeater-item");c(this).is(":checked")?t.removeClass("item-hidden"):t.addClass("item-hidden")}),o.params.title_only||o.container.on("click",".zoo-repeater-item-toggle, .zoo-repeater-live-title",function(e){e.preventDefault(),c(this).closest(".zoo-repeater-item").toggleClass("zoo-open")}),o.container.on("click",".zoo-remove",function(e){e.preventDefault(),c(this).closest(".zoo-repeater-item").remove(),p.trigger("zoo/customizer/repeater/remove",[o]),o.getValue(),o.limitRepeaterItems()});var i={};_.each(o.params.fields,function(e,t){i[e.name]=null,_.isUndefined(e.default)||(i[e.name]=e.default)}),o.container.on("click",".zoo-repeater-add-new",function(e){e.preventDefault(),c(this).hasClass("disabled")||(o.addRepeaterItem(i),o.getValue(),o.limitRepeaterItems())})}},o=function(e){(e=_.extend(e,t)).init()};u.controlConstructor.zoo=u.Control.extend({ready:function(){a[this.id]=this}});var n={pickingEl:null,listIcons:null,render:function(e){var i=this;_.isUndefined(e)||_.isEmpty(e)||_.each(e,function(e,t){c("#zoo-sidebar-icon-type").append(' <option value="'+t+'">'+e.name+"</option>"),i.addCSS(e,t),i.addIcons(e,t)})},addCSS:function(e,t){c("head").append("<link rel='stylesheet' id='font-icon-"+t+"'  href='"+e.url+"' type='text/css' media='all' />")},addIcons:function(a,o){var n='<ul class="zoo-list-icons icon-'+o+'" data-type="'+o+'">';_.each(a.icons,function(e,t){var i="";i=a.class_config?a.class_config.replace(/__icon_name__/g,e):e,n+='<li title="'+e+'" data-type="'+o+'" data-icon="'+i+'"><span class="icon-wrapper"><i class="'+i+'"></i></span></li>'}),n+="</ul>",c("#zoo-icon-browser").append(n)},changeType:function(){p.on("change","#zoo-sidebar-icon-type",function(){var e=c(this).val();e&&"all"!=e?(c("#zoo-icon-browser .zoo-list-icons").hide(),c("#zoo-icon-browser .zoo-list-icons.icon-"+e).show()):c("#zoo-icon-browser .zoo-list-icons").show()})},show:function(){var e=c("#customize-controls").width();ZooCustomizeBuilderData.isRtl?c("#zoo-sidebar-icons").css("right",e).addClass("zoo-active"):c("#zoo-sidebar-icons").css("left",e).addClass("zoo-active")},close:function(){ZooCustomizeBuilderData.isRtl?c("#zoo-sidebar-icons").css("right",-300).removeClass("zoo-active"):c("#zoo-sidebar-icons").css("left",-300).removeClass("zoo-active"),c(".zoo-icon-picker").removeClass("zoo-icon-picking"),this.pickingEl=null},autoClose:function(){var t=this;p.on("click",function(e){c(e.target).closest(".zoo-icon-picker").length||c(e.target).closest("#zoo-sidebar-icons").length||t.close()}),c("#zoo-sidebar-icons .customize-controls-icon-close").on("click",function(){t.close()}),p.on("keyup",function(e){27===e.keyCode&&t.close()})},picker:function(){var n=this,i=function(e){n.pickingEl&&n.pickingEl.removeClass("zoo-icon-picking"),n.pickingEl=e.closest(".zoo-icon-picker"),n.pickingEl.addClass("zoo-picking-icon"),n.show()};p.on("click",".zoo-icon-picker .zoo-pick-icon",function(e){e.preventDefault();var t=c(this);_.isNull(n.listIcons)?n.ajaxLoad(function(){i(t)}):i(t)}),p.on("click","#zoo-icon-browser li",function(e){e.preventDefault();var t=c(this),i=t.find("i").clone(),a=t.attr("data-icon")||"",o=t.attr("data-type")||"";c(".zoo-input-icon-type",n.pickingEl).val(o),c(".zoo-input-icon-name",n.pickingEl).val(a).trigger("change"),c(".zoo-icon-preview-icon",n.pickingEl).html(i),n.close()}),p.on("click",".zoo-icon-picker .zoo-icon-remove",function(e){e.preventDefault(),n.pickingEl&&n.pickingEl.removeClass("zoo-icon-picking"),n.pickingEl=c(this).closest(".zoo-icon-picker"),n.pickingEl.addClass("zoo-picking-icon"),c(".zoo-input-icon-type",n.pickingEl).val(""),c(".zoo-input-icon-name",n.pickingEl).val("").trigger("change"),c(".zoo-icon-preview-icon",n.pickingEl).html("")})},ajaxLoad:function(t){var i=this;c.get(ZooCustomizeBuilderData.ajax,{action:"zoo_customize__load_font_icons"},function(e){e.success&&(i.listIcons=e.data,i.render(e.data),i.changeType(),i.autoClose(),_.isFunction(t)&&t())})},init:function(){this.ajaxLoad(),this.picker(),p.on("keyup","#zoo-icon-search",function(e){var t=c(this).val();(t=t.trim())?(c("#zoo-icon-browser li").hide(),c("#zoo-icon-browser li[data-icon*='"+t+"']").show()):c("#zoo-icon-browser li").show()})}},d={fonts:null,optionHtml:"",$el:null,values:{},config:{},container:null,fields:{},load:function(){d.fonts||c.get(ZooCustomizeBuilderData.ajax,{action:"zoo_customize_load_fonts"}).done(function(e){e.success&&(d.fonts=e.data,p.trigger("typoFontsLoaded",[d.fonts]))})},toSelectOptions:function(e,a,t){var i,o,n,s="";if(_.isUndefined(a)&&(a=""),"google"===t)_.each(e,function(e){var t="";e===a&&(t=' selected="selected" '),s+="<option"+t+' value="'+e+'">'+e+"</option>"});else for(_.each(ZooCustomizeBuilderData.list_font_weight,function(e,t){var i="";e===a&&(i=' selected="selected" '),s+="<option"+i+' value="'+t+'">'+e+"</option>"}),n=1;n<=9;n++)o="",(i=100*n)===a&&(o=' selected="selected" '),s+="<option"+o+' value="'+i+'">'+i+"</option>";return s},toCheckboxes:function(e,i){var a='<div class="list-subsets">';return _.isObject(i)||(i={}),_.each(e,function(e){var t="";_.isUndefined(i[e])||(t=' checked="checked" '),a+="<p><label><input "+t+'type="checkbox" class="zoo-typo-input change-by-js" data-name="languages" name="_n-'+(new Date).getTime()+'" value="'+e+'"> '+e+"</label></p>"}),a+="</div>"},ready:function(){var a=this;s.devices=_.clone(s.allDevices),_.isObject(a.values)||(a.values={}),a.fields={},_.isEmpty(a.config)?a.fields=ZooCustomizeBuilderData.typo_fields:_.each(ZooCustomizeBuilderData.typo_fields,function(e,t){var i=!0;_.isUndefined(a.config[e.name])||!1===a.config[e.name]&&(i=!1),i&&(a.fields[e.name]=e)}),c(".zoo-modal-settings--fields",a.container).append('<input type="hidden" class="zoo-font-type">'),s.addFields(a.fields,a.values,c(".zoo-modal-settings--fields",a.container),function(){a.get()}),c("input, select, textarea",c(".zoo-modal-settings--fields")).removeClass("zoo-input").addClass("zoo-typo-input change-by-js"),a.optionHtml+='<option value="">'+ZooCustomizeBuilderData.theme_default+"</option>",_.each(a.fonts,function(e,t){a.optionHtml+='<optgroup label="'+e.title+'">',_.each(e.fonts,function(e,t){a.optionHtml+='<option value="'+t+'">'+t+"</option>"}),a.optionHtml+="</optgroup>"}),c('.zoo-typo-input[data-name="font"]',a.container).html(a.optionHtml),!_.isUndefined(a.values.font)&&_.isString(a.values.font)&&c('.zoo-typo-input[data-name="font"] option[value="'+a.values.font+'"]',a.container).attr("selected","selected"),a.container.on("change init-change",'.zoo-typo-input[data-name="font"]',function(){var e=c(this).val();a.setUpFont(e)}),c('.zoo-typo-input[data-name="font"]',a.container).trigger("init-change"),a.container.on("change data-change","input, select",function(){a.get()})},setUpFont:function(e){var t,i,a,o,n=this;_.isEmpty(e)&&(o="normal"),t=_.isString(e)?(o=_.isUndefined(n.fonts.google.fonts[e])?"normal":"google",n.fonts.google.fonts[e]):n.fonts.google.fonts[e.font],_.isUndefined(t)||_.isEmpty(t)||(i=t.variants,a=t.subsets),c('.zoo-typo-input[data-name="font_weight"]',n.container).html(n.toSelectOptions(i,_.isObject(n.values)?n.values.font_weight:"",o)),c(".zoo-font-type",n.container).val(o),"normal"==o?c('.zoo-group-field[data-field-name="languages"]',n.container).addClass("zoo-hide").find(".zoo-customize-control-settings-inner").html(""):(c('.zoo-group-field[data-field-name="languages"]',n.container).removeClass("zoo-hide"),c('.zoo-group-field[data-field-name="languages"]',n.container).removeClass("zoo-hide").find(".zoo-customize-control-settings-inner").html(n.toCheckboxes(a,_.isObject(n.values)?n.values.languages:"")))},open:function(){var e=this,t=e.$el;if("opening"!==(t.attr("data-opening")||!1)){if(t.attr("data-opening","opening"),e.values=c(".zoo-typography-input",e.$el).val(),e.values=JSON.parse(e.values),t.addClass("zoo-modal--inside"),c(".zoo-modal-settings",t).length)e.container=c(".zoo-modal-settings",t),e.container.hide();else{var i=c(c("#tmpl-zoo-modal-settings").html());e.container=i,e.container.hide(),this.$el.append(i),e.ready()}e.container.slideDown(300,function(){e.$el.addClass("modal--opening"),c(".action--reset",e.$el).show()})}else c(".zoo-modal-settings",t).slideUp(300,function(){t.attr("data-opening",""),t.removeClass("modal--opening"),c(".action--reset",t).hide()})},reset:function(){var e=this,t=e.$el;c(".zoo-modal-settings",t).remove(),e.values=c(".zoo-typography-input",e.$el).attr("data-default")||"{}";try{e.values=JSON.parse(e.values)}catch(e){}if(t.addClass("zoo-modal--inside"),c(".zoo-modal-settings",t).length)e.container=c(".zoo-modal-settings",t);else{var i=c(c("#tmpl-zoo-modal-settings").html());e.container=i,this.$el.append(i),e.ready()}e.get()},get:function(){var t={},i=this;return _.each(this.fields,function(e){"languages"===e.name&&(e.type="checkboxes"),t[e.name]=s.getValue(e,c('.zoo-group-field[data-field-name="'+e.name+'"]',i.container))}),t.variant={},_.isUndefined(i.fonts.google.fonts[t.font])||(t.variant=i.fonts.google.fonts[t.font].variants),t.font_type=c(".zoo-font-type",i.container).val(),c(".zoo-typography-input",this.$el).val(JSON.stringify(t)).trigger("change"),t},init:function(){this.load()}};d.load();var m={},l={tabs:{normal:"Normal",hover:"Hover"},config:{},$el:null,container:null,controlID:"",addFields:function(e){var o=this;_.isObject(o.values)||(o.values={}),o.values=_.defaults(o.values,{});var n=c(".zoo-modal-settings--fields",o.container);n.html(""),o.config=_.defaults(o.config,{tabs:{}});var i=c('<div class="modal--tabs"></div>'),a=0;_.each(o.config.tabs,function(e,t){e&&_.isObject(o.config[t+"_fields"])&&(a++,i.append('<div><span data-tab="'+t+'" class="modal--tab modal-tab--'+t+'">'+e+"</span></div>"))}),n.append(i),a<=1&&i.addClass("zoo-hide"),s.devices=ZooCustomizeBuilderData.devices,_.each(o.config.tabs,function(e,t){if(_.isObject(o.config[t+"_fields"])&&!_.isEmpty(t+"_fields")){var i,a=c('<div class="modal-tab-content modal-tab--'+t+'"></div>');n.append(a),s.addFields(o.config[t+"_fields"],o.values[t],a,function(){o.get(_.clone(o.config))}),_.isUndefined(o.values[t])||_.isEmpty(o.values[t])?(i={},_.each(o.config[t+"_fields"],function(e){i[e.name]=_.isUndefined(e.default)?null:e.default})):i=o.values[t],s.initConditional(a,i)}}),c("input, select, textarea",o.container).removeClass("zoo-input").addClass("zoo-modal-input change-by-js"),n.on("change data-change","input, select, textarea",function(){o.get(_.clone(o.config))}),o.container.on("click",".modal--tab",function(){var e=c(this).attr("data-tab")||"";c(".modal--tabs .modal--tab",o.container).removeClass("tab--active"),c(this).addClass("tab--active"),c(".modal-tab-content",o.container).removeClass("tab--active"),c(".modal-tab-content.modal-tab--"+e,o.container).addClass("tab--active")}),c(".modal--tabs .modal--tab",o.container).eq(0).trigger("click"),this.container.slideUp(0)},close:function(){var e=this;e.container.slideUp(300,function(){e.$el.removeClass("modal--opening"),e.$el.attr("data-opening",""),c(".action--reset",e.$el).hide()})},reset:function(){var t=this;c(".zoo-modal-settings",t.$el).remove();try{var e=u.control(t.controlID).params.default;t.values=e}catch(e){t.values={}}if(c(".zoo-modal-settings",t.$el).length)t.container=c(".zoo-modal-settings",t.$el);else{var i=c(c("#tmpl-zoo-modal-settings").html());t.container=i,this.$el.append(i),t.addFields()}t.$el.addClass("zoo-modal--inside"),t.$el.addClass("modal--opening"),t.container.show(0),c(".zoo-hidden-modal-input",t.$el).val(JSON.stringify(t.values)).trigger("change")},get:function(e){var o={},n=this;return n.config=e,_.each(n.config.tabs,function(e,t){var i={},a=c(".modal-tab-content.modal-tab--"+t,n.container);_.isObject(n.config[t+"_fields"])&&_.each(n.config[t+"_fields"],function(e){i[e.name]=s.getValue(e,c('.zoo-group-field[data-field-name="'+e.name+'"]',a))}),o[t]=i,s.initConditional(a,i)}),c(".zoo-hidden-modal-input",this.$el).val(JSON.stringify(o)).trigger("change"),o},open:function(){var e=this;if("opening"!==(e.$el.attr("data-opening")||!1)){e.$el.attr("data-opening","opening"),e.values=c(".zoo-hidden-modal-input",e.$el).val();try{e.values=JSON.parse(e.values)}catch(e){}if(e.$el.addClass("zoo-modal--inside"),c(".zoo-modal-settings",e.$el).length)e.container=c(".zoo-modal-settings",e.$el);else{var t=c(c("#tmpl-zoo-modal-settings").html());t.hide(),e.container=t,e.$el.append(t),e.addFields()}this.container.slideDown(300),this.$el.addClass("modal--opening"),c(".action--reset",this.$el).show()}else this.container.slideUp(300,function(){e.$el.attr("data-opening",""),c(".zoo-modal-settings",e.$el).hide(),e.$el.removeClass("modal--opening"),c(".action--reset",e.$el).hide()})}},r={},f={tabs:{normal:"Normal",hover:"Hover"},fields:{},normal_fields:{},hover_fields:{},controlID:"",$el:"",contailner:"",setupFields:function(t,e){var i,a,o=[];return-1===t?o=e:!1===t?o=null:_.isObject(t)&&(i={},a=0,_.each(e,function(e){(_.isUndefined(t[e.name])||t[e.name])&&(i[a]=e,a++)}),o=i),o},setupConfig:function(e,t,i){var a=this;a.tabs={},a.normal_fields={},a.hover_fields={},a.tabs=_.clone(ZooCustomizeBuilderData.styling_config.tabs),!1===e?a.tabs.hover=!1:_.isObject(e)&&(a.tabs=e),a.normal_fields=a.setupFields(t,ZooCustomizeBuilderData.styling_config.normal_fields),a.hover_fields=a.setupFields(i,ZooCustomizeBuilderData.styling_config.hover_fields)},addFields:function(e){var a=this;_.isObject(a.values)||(a.values={}),a.values=_.defaults(a.values,{hover:{},normal:{}});var o=c(".zoo-modal-settings--fields",a.container);o.html("");var i=c('<div class="modal--tabs"></div>'),n=0;_.each(a.tabs,function(e,t){e&&!_.isEmpty(a[t+"_fields"])&&(n++,i.append('<div><span data-tab="'+t+'" class="modal--tab modal-tab--'+t+'">'+e+"</span></div>"))}),o.append(i),n<=1&&i.addClass("zoo-hide"),s.devices=ZooCustomizeBuilderData.devices,_.each(a.tabs,function(e,t){if(_.isObject(a[t+"_fields"])&&!_.isEmpty(t+"_fields")){var i=c('<div class="modal-tab-content modal-tab--'+t+'"></div>');o.append(i),s.addFields(a[t+"_fields"],a.values[t],i,function(){a.get()}),s.initConditional(i,a.values[t])}}),c("input, select, textarea",a.container).removeClass("zoo-input").addClass("zoo-modal-input change-by-js"),o.on("change data-change","input, select, textarea",function(){a.get()}),a.container.on("click",".modal--tab",function(){var e=c(this).attr("data-tab")||"";c(".modal--tabs .modal--tab",a.container).removeClass("tab--active"),c(this).addClass("tab--active"),c(".modal-tab-content",a.container).removeClass("tab--active"),c(".modal-tab-content.modal-tab--"+e,a.container).addClass("tab--active")}),c(".modal--tabs .modal--tab",a.container).eq(0).trigger("click"),this.container.slideUp(0)},close:function(){var e=this;e.container.slideUp(300,function(){e.$el.removeClass("modal--opening"),e.$el.attr("data-opening",""),c(".action--reset",e.$el).hide()})},reset:function(){var t=this;c(".zoo-modal-settings",t.$el).remove();try{var e=u.control(t.controlID).params.default;t.values=e}catch(e){t.values={}}if(c(".zoo-modal-settings",t.$el).length)t.container=c(".zoo-modal-settings",t.$el);else{var i=c(c("#tmpl-zoo-modal-settings").html());t.container=i,t.$el.append(i),t.addFields()}t.$el.addClass("zoo-modal--inside"),t.$el.addClass("modal--opening"),t.container.show(0),c(".zoo-hidden-modal-input",t.$el).val(JSON.stringify(t.values)).trigger("change")},get:function(){var o={},n=this;return _.each(n.tabs,function(e,t){var i={},a=c(".modal-tab-content.modal-tab--"+t,n.container);_.isObject(n[t+"_fields"])&&_.each(n[t+"_fields"],function(e){i[e.name]=s.getValue(e,c('.zoo-group-field[data-field-name="'+e.name+'"]',a))}),o[t]=i,s.initConditional(a,i)}),c(".zoo-hidden-modal-input",this.$el).val(JSON.stringify(o)).trigger("change"),o},open:function(){var e=this;if("opening"!==(e.$el.attr("data-opening")||!1)){e.$el.attr("data-opening","opening"),e.values=c(".zoo-hidden-modal-input",e.$el).val();try{e.values=JSON.parse(e.values)}catch(e){}if(e.$el.addClass("zoo-modal--inside"),c(".zoo-modal-settings",e.$el).length)e.container=c(".zoo-modal-settings",e.$el);else{var t=c(c("#tmpl-zoo-modal-settings").html());t.hide(),e.container=t,e.$el.append(t),e.addFields()}this.container.slideDown(300),e.$el.addClass("modal--opening"),c(".action--reset",e.$el).show()}else e.container.slideUp(300,function(){e.$el.attr("data-opening",""),c(".zoo-modal-settings",e.$el).hide(),e.$el.removeClass("modal--opening"),c(".action--reset",e.$el).hide()})}},v={};u.bind("ready",function(e,t){c(".zoo-range-slider")[0]&&(c(".zoo-range-slider").wrap('<div class="wrap-zoo-range-slider"></div>'),c(".wrap-zoo-range-slider").prepend('<div class="zoo-range-slider-block zoo-input-slider"></div>'),c(".wrap-zoo-range-slider").each(function(){var e=c(this).find(".zoo-range-slider").val(),i=c(this).find(".zoo-range-slider"),t=i.attr("min"),a=i.attr("max"),o=c(this).find(".zoo-range-slider-block");o.slider({range:"min",value:parseInt(e),step:1,min:parseInt(t),max:parseInt(a),slide:function(e,t){i.val(t.value).trigger("data-change"),i.trigger("change")}}),i.on("change",function(){o.slider("value",c(this).val())})})),p.on("zoo/customizer/device/change",function(e,t){c(".zoo-device-select a").removeClass("zoo-active"),"mobile"!=t?(c(".zoo-device-mobile").addClass("zoo-hide"),c(".zoo-device-general").removeClass("zoo-hide"),c(".zoo-tab-device-general").addClass("zoo-active")):(c(".zoo-device-general").addClass("zoo-hide"),c(".zoo-device-mobile").removeClass("zoo-hide"),c(".zoo-tab-device-mobile").addClass("zoo-active"))}),p.on("click",".zoo-tab-device-mobile",function(e){e.preventDefault(),p.trigger("zoo/customizer/device/change",["mobile"])}),p.on("click",".zoo-tab-device-general",function(e){e.preventDefault(),p.trigger("zoo/customizer/device/change",["general"])}),c(".accordion-section").each(function(){var e=c(this),t=c(".zoo-device-select",e).first();c(".customize-section-title",e).append(t)}),p.on("click",".zoo-devices button",function(e){e.preventDefault();var t=c(this).attr("data-device")||"";c('#customize-footer-actions .devices button[data-device="'+t+'"]').trigger("click")}),p.on("change",".zoo-customize-control input:checkbox",function(e){c(this).is(":checked")?c(this).parent().addClass("zoo-checked"):c(this).parent().removeClass("zoo-checked")});var i=function(a){_.isUndefined(a)&&(a=!1);var o=u.get();_.each(o,function(e,t){var i=u.control(t);if(!_.isUndefined(i)&&"zoo"==i.params.type&&!_.isEmpty(i.params.required)){i.multiple_compare(i.params.required,o,a)?i.container.removeClass("zoo-hide"):i.container.addClass("zoo-hide")}})};p.ready(function(){_.each(a,function(e,t){new o(e)}),i(!1),p.on("zoo/customizer/value_changed",function(){i(!0)}),n.init(),p.on("click",".customize-control-zoo-styling .action--edit, .customize-control-zoo-styling .action--reset",function(e){e.preventDefault();var t=c(this).attr("data-control")||"";if(_.isUndefined(v[t])){var i=u.control(t),a=_.clone(f),o=null,n=-1,s=-1;t&&!_.isUndefined(i)&&!_.isUndefined(i.params.fields)&&_.isObject(i.params.fields)&&(_.isUndefined(i.params.fields.tabs)||(o=i.params.fields.tabs),_.isUndefined(i.params.fields.normal_fields)||(n=i.params.fields.normal_fields),_.isUndefined(i.params.fields.hover_fields)||(s=i.params.fields.hover_fields)),a.$el=c(this).closest(".customize-control-zoo-styling").eq(0),a.setupConfig(o,n,s),a.controlID=t,v[t]=a}_.isUndefined(v[t])||(c(this).hasClass("action--reset")?v[t].reset():v[t].open())}),p.on("click",".customize-control-zoo-modal .action--edit, .customize-control-zoo-modal .action--reset, .customize-control-zoo-modal .zoo-control-field-header",function(e){e.preventDefault();var t=c(this).attr("data-control")||"";if(_.isUndefined(r[t])){var i=u.control(t);if(t&&!_.isUndefined(i)){var a=_.clone(l);a.config=i.params.fields,a.$el=c(this).closest(".customize-control-zoo-modal").eq(0),a.controlID=t,r[t]=a}}_.isUndefined(r[t])||(c(this).hasClass("action--reset")?r[t].reset():r[t].open())}),p.on("click",".customize-control-zoo-typography .action--edit, .customize-control-zoo-typography .action--reset",function(){var e=c(this).attr("data-control")||"";if(_.isUndefined(m[e])){var t=u.control(e);if(e&&!_.isUndefined(t)){var i=_.clone(d);i.config=t.params.fields,i.$el=c(this).closest(".customize-control-zoo-typography").eq(0),m[e]=i}}_.isUndefined(m[e])||(c(this).hasClass("action--reset")?m[e].reset():m[e].open())}),p.on("typoFontsLoaded",function(e,r){var t=c(".zoo-actions .action--edit");t.length&&t.each(function(e){var t=c(this).attr("data-control")||"",i=u.control(t);if(_.isUndefined(m[t])){if("typography"===i.params.setting_type){var a=_.clone(d);a.config=i.params.fields,a.$el=i.container,a.fonts||(a.fonts=r),m[t]=a,i.container.hasClass("no-hide")&&m[t].open()}if("styling"===i.params.setting_type){var o=_.clone(f),n=null,s=-1,l=-1;!_.isUndefined(i.params.fields)&&_.isObject(i.params.fields)&&(_.isUndefined(i.params.fields.tabs)||(n=i.params.fields.tabs),_.isUndefined(i.params.fields.normal_fields)||(s=i.params.fields.normal_fields),_.isUndefined(i.params.fields.hover_fields)||(l=i.params.fields.hover_fields)),o.$el=i.container,o.setupConfig(n,s,l),o.controlID=t,v[t]=o,i.container.hasClass("no-hide")&&v[t].open()}}})})}),u.section.each(function(e){"section"!=e.params.type&&"zoo_section"!=e.params.type||e.container.find(".customize-section-description-container .customize-section-title").append('<button data-section="'+e.id+'" type="button" title="'+ZooCustomizeBuilderData.reset+'" class="customize--reset-section" aria-expanded="false"><span class="screen-reader-text">'+ZooCustomizeBuilderData.reset+"</span></button>")}),p.on("dblclick",".zoo-text-align label",function(e){var t=c(this).find('input[type="radio"]');t.length&&t.is(":checked")&&(t.removeAttr("checked"),t.trigger("data-change"))}),p.on("click",".customize--reset-section",function(e){if(e.preventDefault(),!c(this).hasClass("loading")&&confirm(ZooCustomizeBuilderData.confirm_reset)){c(this).addClass("loading");var t=c(this).attr("data-section")||"",i=_.clone(window.location);if(t){var a=[],o=u.section(t).controls();_.each(o,function(e,t){wpcustomize(e.id).set(""),a[t]=e.id}),c.post(ajaxurl,{action:"zoo__reset_section",section:t,settings:a},function(){c(window).off("beforeunload.customize-confirm"),top.location.href=i.origin+i.pathname+"?autofocus[section]="+t+"&url="+encodeURIComponent(u.previewer.previewUrl.get())})}}})});var h=function(n,s){var e={id:s,controlId:"",cols:12,cellHeight:45,items:[],container:null,ready:!1,devices:{desktop:"Desktop",mobile:"Mobile/Tablet"},activePanel:"desktop",panels:{},activeRow:"main",draggingItem:null,getTemplate:_.memoize(function(){var a=this,o={evaluate:/<#([\s\S]+?)#>/g,interpolate:/\{\{\{([\s\S]+?)\}\}\}/g,escape:/\{\{([^\}]+?)\}\}(?!\})/g,variable:"data"};return function(e,t,i){return _.isUndefined(t)&&(t="tmpl-customize-control-"+a.type),!_.isUndefined(i)&&_.isString(i)?o.variable=i:o.variable="data",_.template(c("#"+t).html(),null,o)(e)}}),drag_drop:function(){var n=this;c(".zoo-device-panel",n.container).each(function(){var i=c(this),a=i.data("device"),o=[];n.panels[a]={},c(".zoo-customize-builder-items",i).each(function(e){var t,i=c(this).attr("data-id")||"";t=i?"_sid_"+a+"-"+i:"_sid_"+a+e,c(this).attr("id",t),o[e]="#"+t}),c(".grid-stack, .zoo-customize-builder-sidebar-items",i).each(function(){var e=c(this).attr("data-id")||"";n.panels[a][e]=c(this),c(this).droppable({out:function(e,t){},over:function(e,t){},drop:function(e,t){var i=c(this);n.gridster(i,t,e),n.save()}})}),c(".zoo-available-items .grid-stack-item",i).draggable({revert:"invalid",connectToSortable:!1,start:function(e,t){c("body").addClass("builder-item-moving"),c(".zoo-customize-builder-items",i).css("z-index",""),t.helper.parent().css("z-index",9999)},stop:function(e,t){c("body").removeClass("builder-item-moving"),c(".zoo-customize-builder-items",i).css("z-index",""),t.helper.parent().css("z-index","")}}),c(".zoo-available-items .grid-stack-item",i).resizable({handles:"w, e",stop:function(e,t){n.setGridWidth(t.element.parent(),t),n.save()}})})},sortGrid:function(e){c(".grid-stack-item",e).each(function(){var e=c(this),t=e.attr("data-gs-x")||0;t=parseInt(t);var i=e.next();if(0<i.length){var a=i.attr("data-gs-x")||0;(a=parseInt(a))<t&&e.insertAfter(i)}})},getX:function(e){var t=e.attr("data-gs-x")||0;return parseInt(t)},getW:function(e,t){var i;return _.isUndefined(t)&&(t=!1),i=t?e.attr("data-df-width")||1:e.attr("data-gs-width")||1,parseInt(i)},gridGetItemInfo:function(e,t,i){var a,o=this.getX(e),n=this.getW(e),s=0,l=0,r=!1;for(a=o-1;0<=a&&!r;)0===t[a]?s++:r=!0,a--;for(r=!1,a=o+n;a<this.cols&&!r;)0===t[a]?l++:r=!0,a++;return{flag:t,x:o,w:n,item:e,before:s,after:l,id:e.attr("data-id")||"",wrapper:i}},updateItemsPositions:function(e){for(var t=this.cols,i=0;i<=t;i++)"object"!=typeof e[i]&&"function"!=typeof e[i]||e[i].attr("data-gs-x",i)},gridster:function(e,t,i){"_sid_desktop-sidebar"!=e.context.id&&"_sid_mobile-sidebar"!=e.context.id||(this.cols=64);var a,m=[],f=this,v=this.cols,h=function(e){for(var t=e.x,i=e.w,a=e.el,o=t;o<t+i;o++)m[o]=o===t?a:1},r=function(e){for(var t=e.x,i=e.w,a=(e.el,t);a<t+i;a++)m[a]=0},g=function(e,t){for(var i=0,a=e;a<v;a++)if(0===m[a])i++;else if(t)return i;return i},z=function(e,t){var i=0;void 0===t&&(t=!1);for(var a=e;0<=a;a--)if(0===m[a])i++;else if(t)return i;return i},b=function(e){return 0===m[e]},w=function(e,t){for(var i=e;i<e+t;){if(0!==m[i])return!1;i++}return!0},y=function(e){if(e<0)return{x:-1,w:1};var t,i,a,o=-1;if(m[e]<=1)for(t=e,a=!1;0<=t&&!a;)1!==m[t]&&0!==m[t]&&(o=t,a=!0),t--;else o=e;for(t=o+1,i=o;1===m[t];)i++,t++;return{x:o,w:i+1-o}},C=function(e){var t,i,a,o=-1;if(m[e]<v)for(t=e,a=!1;t<v&&!a;)1!==m[t]&&0!==m[t]&&(o=t,a=!0),t++;else o=e;for(t=o+1,i=o;1===m[t];)i++,t++;return{x:o,w:i+1-o}},k=function(e,t){var i=m.slice(),a=z(e);if(0===a)return t;var o=y(e),n=0<=o.x?o.x+o.w-1:e,s=t;s=a<t?a:t;for(var l=0,r=0,d=n;r<=s&&0<=d;)0===m[d]&&(r++,l=d),d--;var c=[],u=0;for(d=l;d<=n;d++)(m[d]=0)!==i[d]&&(c[u]=i[d],u++);for(u=0,d=l;d<=n;d++)void 0!==c[u]?m[d]=c[u]:m[d]=0,u++;return t-s},x=function(e,t){var i=m.slice(),a=g(e);if(0===a)return t;var o=y(e),n=0<=o.x?o.x:e,s=t;s=t<=a?t:a;for(var l=e,r=0,d=n;r<s&&d<v;)0===m[d]&&(r++,l=d),d++;var c=[],u=0;for(d=n;d<=l;d++)(m[d]=0)!==i[d]&&(c[u]=i[d],u++);for(u=c.length-1,d=l;n<=d;d--)void 0!==c[u]?m[d]=c[u]:m[d]=0,u--;return t-s},D=function(){f.updateItemsPositions(m)},d=function(e,t){var i,a,o,n,c=e.x,s=e.w,l=function(){for(var e=0,t=0;t<v;t++)0===m[t]&&e++;return e}();if(l<=0)return!1;if(_.isUndefined(t)&&(t=!1),!t){if(b(c)){if(w(c,n=s))return h(e),e.el.attr("data-gs-x",c),e.el.attr("data-gs-width",n),!0;for((i=s<=(a=g(c,!0))+(o=z(c-1,!0))&&s-a<=o?c-(s-a):c-o)<0&&(i=0);1<=n;){if(w(i,n))return e.x=i,e.w=n,h(e),e.el.attr("data-gs-x",i),e.el.attr("data-gs-width",n),!0;n--}}if(1===m[c]){var r=y(c);if(0<=r.x&&c>r.x+Math.floor(r.w/2)&&c>r.x&&(i=r.x+r.w,s<=(a=g(i,!0))))return h({el:e.el,x:i,w:s}),e.el.attr("data-gs-x",i),e.el.attr("data-gs-width",s),!0}}!function(e,t){var i,a,o,n,s=0,l=!1;if(b(t)){if(i=y(t),a=C(t),-1<i.x){if((s=g(i.x))>=e.w)if(w(t,e.w))c=t,l=!0;else if(e.ox>t)for(o=i.x+i.w,n=(n=z(o))<=e.w?e.w-n:e.w,x(o+1,n),s=g(o),l=!1;o>i.x+i.w&&!l;)w(o,e.w)&&(c=o,l=!0),o--;if(!l&&e.ox<t){o=i.x+i.w-1,(n=z(i.x))>e.w&&(n=e.w),n-=2,k(i.x,n),o-=s=g(o),a=C(t);var r=i.x+i.w;for(-1<a.x&&(r=a.x);o<r&&!l;)w(o,e.w)&&(c=o,l=!0),o++}l||(c=i.x+i.w,e.w=s,e.x=c)}else if(-1<a.x){a=C(t);var d=(s=g(t,!1))>=e.w?e.w:s;for(x(t,d),o=a.x;0<=o&&!l;)w(o,e.w)&&(c=o,e.x=c,l=!0),o--;l||(c=t,e.w=s,e.x=c)}}else if(i=y(t),e.ox<i.x)if(k(t,e.w),b(t))c=t;else{for(;!b(t)&&t<=f.cols-1;)t++;c=t}else if(x(t,e.w),b(t))c=t;else{for(;!b(t)&&0<=t;)t--;c=t}c>f.cols&&(c=f.cols-1),e.x=c}(e,_.clone(c));var d,u=!1,p=0;for(c+s>f.cols-1&&(p=z(c,!0)),D(),p=0;1<=s;){if(s<=l){if(w(c,s))return e.w=s,h(e),e.el.attr("data-gs-x",c),e.el.attr("data-gs-width",s),!0;for(p=z(c,!(u=!1)),d=c-p;d<v&&!u;){if(w(d,s))return e.w=s,h({el:e.el,x:d,w:s}),e.el.attr("data-gs-x",d),e.el.attr("data-gs-width",s),u=!0;d++}}s--}for(s=e.w,u=!1;1<=s;){for(d=0;d<v&&!u;){if(w(d,s))return h({el:e.el,x:d,w:s}),e.el.attr("data-gs-x",d),e.el.attr("data-gs-width",s),u=!0;d++}s--}return!1};a=(m=(f=this).getFlag(e)).slice();var o=e.offset();f.draggingItem=t.draggable;var n,s,l,c,u=e.width(),p=u/f.cols,U=0,I=t.offset;s=f.getW(t.draggable,!1),n=f.getW(t.draggable,!0),l=t.draggable.width();var $=f.getX(t.draggable);ZooCustomizeBuilderData.isRtl&&r({el:t.draggable,x:$,w:n});var F,O=0,S=0,R=!1;if(t.draggable.parent().is(e)?(c=!0,n=s):(c=!1,n<s&&(n=s)),ZooCustomizeBuilderData.isRtl?(O=Math.round((o.left+u+10-i.clientX)/p),(S=Math.round((o.left+u-(I.left+l+10))/p))<0&&(S=0)):(O=Math.round((i.clientX-o.left)/p),(S=Math.round((I.left-o.left-10)/p))<0&&(S=0)),O>f.cols&&(O=f.cols),F=U=S,ZooCustomizeBuilderData.isRtl)if(b(F))U=S,R=!0;else for(;F<f.cols&&!R;)b(F)?R=!0:F++;else if(b(U))U=S,R=!0;else{for(;U<=O&&!R;)b(U)?R=!0:U++;O<U&&(U=O)}if(R||(U=c?S:O),U<0&&(U=0),U+n>=f.cols){for(R=!0,F=U;F+n>f.cols&&R;)b(F)?F--:(F++,R=!1);U=F}R=void 0;var j={el:t.draggable,x:U,w:n,ox:$,ow:s};j.x<=0&&(j.x=0);(c?(j.x=parseInt(t.draggable.attr("data-gs-x")||0),j.w=parseInt(t.draggable.attr("data-gs-width")||1),function(e,t){e.x;var i=e.w;r(e);var a=y(t),o=0;if(-1<a.x&&(o=a.x+a.w),w(t,i))return h({el:e.el,x:t,w:i});if(0<o&&w(o,i)&&o<=t){var n=C(t);if(-1<n.x&&e.w+t>=n.x)for(var s=_.clone(t);o<s;){if(w(s,i))return h({el:e.el,x:s,w:i});s--}if(t+i>f.cols){var l=f.cols-i;if(w(l,i))return h({el:e.el,x:l,w:i})}return h({el:e.el,x:o,w:i})}e.x=t,d(e,!0)}(j,U),!0):d(j))?(t.draggable.removeClass("item-from-list"),e.append(t.draggable),t.draggable.removeAttr("style"),f.draggingItem=null):(t.draggable.removeAttr("style"),m=a),D(),f.updateAllGrids()},updateAllGrids:function(){var i=this;_.each(i.panels[i.activePanel],function(e,t){i.updateGridFlag(e)})},setGridWidth:function(e,t){var i,a,o=this,n=t.element,s=e.width(),l=t.size.width,r=t.originalSize.width,d=Math.ceil(s/o.cols)-1;a=ZooCustomizeBuilderData.isRtl?(i=t.originalPosition.left>t.position.left,r!==l):(i=t.originalPosition.left>t.position.left,t.originalPosition.left<t.position.left);var c,u,p,m=t.originalElement.attr("data-gs-width")||1,f=t.originalElement.attr("data-gs-x")||0;m=parseInt(m),f=parseInt(f);var v,h=o.getFlag(e),g=o.gridGetItemInfo(t.originalElement,h,e);if(i)return ZooCustomizeBuilderData.isRtl?(u=Math.floor((t.position.left-1)/d),(c=(u=o.cols-u)-f-m)>g.after&&(c=g.after),p=m+c,n.attr("data-gs-x",f).removeAttr("style")):((c=f-(u=Math.floor((t.position.left-1)/d)))>g.before&&(c=g.before),u=f-c,p=m+c,n.attr("data-gs-x",u).removeAttr("style")),n.attr("data-gs-width",p).removeAttr("style"),void o.updateGridFlag(e);if(a)return ZooCustomizeBuilderData.isRtl?t.originalPosition.left!==t.position.left?(u=Math.floor((t.position.left-1)/d),m<(c=m+f-(u=o.cols-u))&&(c=0),p=m-c,(u=f)<=0&&(u=0)):(u=Math.ceil((t.position.left+t.size.width-11)/d),(c=f-(u=o.cols-u))>g.before&&(c=g.before),u=f-c,p=m+c):((p=m-(c=(u=Math.round((t.position.left-1)/d))-f))<=0&&(p=1,c=0),u=f+c),n.attr("data-gs-x",u).removeAttr("style"),n.attr("data-gs-width",p).removeAttr("style"),void o.updateGridFlag(e);var z,_=g.x;l<t.originalSize.width?((z=Math.round((t.position.left+t.size.width-11)/d))<=_&&(z=_+1),v=g.w-(_+g.w-z)):(z=Math.ceil((t.position.left+t.size.width-11)/d),v=g.w+(z-(_+g.w)),g.x+v>g.x+g.w+g.after&&(v=g.w+g.after)),v<=0&&(v=1),n.attr("data-gs-width",v).removeAttr("style"),o.updateGridFlag(e)},getFlag:function(e){var t=e.data("gridRowFlag")||[];if(_.isEmpty(t)){for(var i=0;i<this.cols;i++)t[i]=0;e.data("gridRowFlag",t)}return t},updateGridFlag:function(e){var a,o=this,n=[];for(a=0;a<o.cols;a++)n[a]=0;return c(".grid-stack-item",e).each(function(e){c(this).removeAttr("style");var t=o.getX(c(this)),i=o.getW(c(this));for(a=t;a<t+i;a++)n[a]=a===t?c(this):1}),e.data("gridRowFlag",n),o.updateItemsPositions(n),o.sortGrid(e),n},addNewWidget:function(e,t){var i=this,a=i.container.find(".zoo-device-panel.zoo-panel-"+i.activePanel),o=t;_.isObject(o)||(o=a.find(".zoo-customize-builder-items").first());var n=e;n.draggable({revert:"invalid",appendTo:a,scroll:!1,zIndex:99999,handle:".grid-stack-item-content",start:function(e,t){c("body").addClass("builder-item-moving"),c(".zoo-customize-builder-items",a).css("z-index",""),t.helper.parent().css("z-index",9999)},stop:function(e,t){c("body").removeClass("builder-item-moving"),c(".zoo-customize-builder-items",a).css("z-index",""),i.save()},drag:function(e,t){}}).resizable({handles:"w, e",start:function(e,t){t.originalElement.css({right:"auto",left:t.position.left})},stop:function(e,t){i.setGridWidth(t.element.parent(),t),i.save()}}),o.append(n),i.updateGridFlag(o)},addPanel:function(e){var t=this.getTemplate(),i="tmpl-zoo-customize-builder-rows";if(0!=c("#"+i).length)return _.isObject(n.rows)||(n.rows={}),'<div class="zoo-device-panel zoo-vertical-panel zoo-panel-'+e+'" data-device="'+e+'">'+t({device:e,id:n.id,rows:n.rows},i)+"</div>"},addDevicePanels:function(){var a=this;_.each(a.devices,function(e,t){var i=a.addPanel(t);c(".zoo-customize-builder-devices-switcher",a.container).append('<a href="#" class="switch-to switch-to-'+t+'" data-device="'+t+'" data-builder="'+n.id+'">'+e+"</a>"),c(".zoo-customize-builder-body",a.container).append(i)})},addItem:function(e){var t=this.getTemplate(),i="tmpl-zoo-customize-builder-item";if(0!=c("#"+i).length){var a=t(e,i);return c(a)}},addAvailableItems:function(){var s=this;_.each(s.devices,function(e,o){var n=c('<div class="zoo-available-items" data-device="'+o+'"></div>');c(".zoo-panel-"+o,s.container).append(n),_.each(s.items,function(e){var t=!0;if(!_.isUndefined(e.devices)&&!_.isEmpty(e.devices))if(_.isString(e.devices))e.devices!=o&&(t=!1);else{var i=!1;_.each(e.devices,function(e){o==e&&(i=!0)}),i||(t=!1)}if(t){var a=s.addItem(e);n.append(a)}})})},switchToDevice:function(e,t){var i=this,a=(_.size(i.devices),c(i.container).find(".zoo-customize-builder-devices-switcher a").data("builder"));c(".zoo-customize-builder-devices-switcher a",i.container).removeClass("zoo-tab-active"),c(".zoo-customize-builder-devices-switcher .switch-to-"+e,i.container).addClass("zoo-tab-active"),c(".zoo-device-panel",i.container).addClass("zoo-panel-hide"),c(".zoo-device-panel",i.container).addClass("zoo-panel-builder-"+a),c(".zoo-device-panel.zoo-panel-"+e,i.container).removeClass("zoo-panel-hide"),i.activePanel=e,(_.isUndefined(t)||t)&&("desktop"==e?c("#customize-footer-actions .preview-desktop").trigger("click"):c("#customize-footer-actions .preview-tablet").trigger("click"))},addExistingRowsItems:function(){var s=this,t=u.control(s.controlId).params.value;_.isObject(t)||(t={}),_.each(s.panels,function(o,n){var e={};_.isObject(t[n])&&(e=t[n]),_.each(e,function(e,a){_.isUndefined(e)||_.each(e,function(e,t){var i=c('.zoo-available-items[data-device="'+n+'"] .grid-stack-item[data-id="'+e.id+'"]').first();i.attr("data-gs-width",e.width),i.attr("data-gs-x",e.x),i.removeClass("item-from-list"),s.addNewWidget(i,o[a])})})}),s.ready=!0},focus:function(){this.container.on("click",".zoo-customize-builder-item-setting, .zoo-customize-builder-item-name, .item-tooltip",function(e){e.preventDefault();var t=c(this).data("section")||"",i=c(this).attr("data-control")||"",a=!1;i&&(_.isUndefined(u.control(i))||(u.control(i).focus(),a=!0)),a||t&&!_.isUndefined(u.section(t))&&(u.section(t).focus(),a=!0)}),this.container.on("click",".zoo-customize-builder-row-settings",function(e){e.preventDefault();var t=c(this).attr("data-id")||"",i=n.id+"_"+t;_.isUndefined(u.section(i))||u.section(i).focus()})},remove:function(){var a=this;p.on("click",".zoo-device-panel .zoo-customize-builder-item-remove",function(e){e.preventDefault();var t=c(this).closest(".grid-stack-item"),i=t.closest(".zoo-device-panel");t.attr("data-gs-width",1),t.attr("data-gs-x",0),t.removeAttr("style"),c(".zoo-available-items",i).append(t),a.updateAllGrids(),a.save()})},encodeValue:function(e){return encodeURI(JSON.stringify(e))},decodeValue:function(e){return JSON.parse(decodeURI(e))},save:function(){var o=this;if(o.ready){var n={};_.each(o.panels,function(e,a){n[a]={},_.each(e,function(e,t){var i=_.map(c(" > .grid-stack-item",e),function(e){return e=c(e),{x:o.getX(e),y:1,width:o.getW(e),height:1,id:e.data("id")||""}});n[a][t]=i})}),u.control(o.controlId).setting.set(o.encodeValue(n))}},showPanel:function(){var t=this;this.container.removeClass("zoo-builder--hide").addClass("zoo-builder-show"),setTimeout(function(){var e=t.container.height();c("#customize-preview").addClass("cb--preview-panel-show").css({bottom:e-1,"margin-top":"0px"})},100)},hidePanel:function(){this.container.removeClass("zoo-builder-show"),c("#customize-preview").removeClass("cb--preview-panel-show").removeAttr("style")},togglePanel:function(){var t=this;u.state("expandedPanel").bind(function(e){u.panel(n.panel).expanded()?(top._current_builder_panel=s,t.showPanel()):t.hidePanel()}),t.container.on("click",".zoo-customize-builder-panel-minimize",function(e){e.preventDefault(),t.container.toggleClass("zoo-builder--hide"),t.container.hasClass("zoo-builder--hide")?c("#customize-preview").removeClass("cb--preview-panel-show"):c("#customize-preview").addClass("cb--preview-panel-show")})},panelLayoutCSS:function(){var e=c("#customize-controls").width();u.state("paneVisible").get()||(e=0),ZooCustomizeBuilderData.isRtl?this.container.find(".zoo-customize-builder-inner").css({"margin-right":e}):this.container.find(".zoo-customize-builder-inner").css({"margin-left":e})},init:function(e,t,i){var a=this,o=a.getTemplate()(n,"tmpl-zoo-customize-builder-panel");a.container=c(o),c("body .wp-full-overlay").append(a.container),a.controlId=e,a.items=t,a.devices=i,n.section&&u.section(n.section).container.addClass("zoo-hide"),a.addDevicePanels(),a.switchToDevice(a.activePanel),a.addAvailableItems(),a.switchToDevice(a.activePanel),a.drag_drop(),a.focus(),a.remove(),a.addExistingRowsItems(),u.panel(n.panel).expanded()?a.showPanel():a.hidePanel(),u.previewedDevice.bind(function(e){"desktop"===e?a.switchToDevice("desktop",!1):a.switchToDevice("mobile",!1)}),a.togglePanel(),u.state("paneVisible").get()&&a.panelLayoutCSS(),u.state("paneVisible").bind(function(){a.panelLayoutCSS()}),c(window).resize(_.throttle(function(){a.panelLayoutCSS()},100)),a.container.on("click",".zoo-customize-builder-devices-switcher a.switch-to",function(e){e.preventDefault();var t=c(this).data("device");a.switchToDevice(t)}),p.trigger("zoo_builder_panel_loaded",[s,a])}};return e.init(n.control_id,n.items,n.devices),e};u.bind("ready",function(e,t){_.each(ZooCustomizeBuilderData.builders,function(e,t){new h(e,t)}),u.state("expandedSection").bind(function(e){c(".zoo-device-panel .grid-stack-item").removeClass("item-active"),c(".zoo-customize-builder-row").removeClass("row-active"),e&&(c('.zoo-customize-builder-row[data-id="'+e.id+'"]').addClass("row-active"),c(".zoo-device-panel .grid-stack-item.for-s-"+e.id).addClass("item-active"))})}),p.on("click",".zoo-customize-focus-button",function(e){e.preventDefault();var t=c(this).attr("data-id")||"";t||(t=(t=c(this).attr("href")||"").replace("#","")),t&&u.section(t)&&u.section(t).focus()}),p.on("click",".focus-control",function(e){e.preventDefault();var t=c(this).attr("data-id")||"";t||(t=(t=c(this).attr("href")||"").replace("#","")),t&&u.control(t)&&u.control(t).focus()}),p.on("click",".focus-panel",function(e){e.preventDefault();var t=c(this).attr("data-id")||"";t||(t=(t=c(this).attr("href")||"").replace("#","")),t&&u.panel(t)&&u.panel(t).focus()}),p.on("click",".save-template-form .save-builder-template",function(e){e.preventDefault();var t=c(this).closest(".customize-control"),i=c(".template-input-name",t),a=i.val();a&&""!==a&&c.post(ajaxurl,{action:"zoo_builder_save_template",name:i.val(),builder:i.attr("data-builder-id")||"",panel:i.attr("data-builder-panel")||""},function(e){e.success?(i.val(""),t.find(".list-saved-templates .li-boxed").removeClass("active-builder-template"),t.find(".list-saved-templates").prepend(e.data.li),t.find(".list-saved-templates").addClass("has-templates")):console.log("Failed")})}),p.on("click",".save-template-form .zoo-customize-import-template-button",function(e){e.preventDefault();var t=new FormData,i=c(this).closest(".customize-control").find(".zoo-customize-import-template-file")[0],a=c(i);if(i.files.length){var o=a.data("builderPanel"),n=a.data("builderId");t.append("panel",o),t.append("builder",n),t.append("action","zoo_builder_save_template"),t.append("zooImportTemplate","OK"),t.append("zooCustomizeTemplateFile",i.files[0]),c.ajax({url:ajaxurl,data:t,method:"POST",contentType:!1,processData:!1}).done(function(e){if(e.success){var t=c("."+n+"_settings-saved-templates");a.val(""),t.prepend(e.data.li),t.addClass("has-templates")}else console.log("Failed")})}}),u.bind("saved",function(e){var t=u.state("expandedPanel").get().id;if(t){var i=t.replace("_settings",""),a=c("."+t+"-saved-templates .active-builder-template")[0];if(a){var o=c(a).data("tplId");o?c.post(ajaxurl,{action:"zoo_builder_update_template",builderId:i,templateId:o},function(e){console.log(e)}):console.log("No active builder template ID found.")}else console.log("No active builder template found.")}else console.log("Invalid saved data. Panel not found.")}),p.on("click",".list-saved-templates .saved_template .delete-tpl",function(e){e.preventDefault();var t=c(this).parent(),i=c(this).closest(".customize-control"),a=c(".template-input-name",i);return t.hasClass("active-builder-template")?(alert("WARNING: You can not delete active template. Switch to another template before deleting it."),!1):!!confirm("Are you sure to delete this template?")&&void c.post(ajaxurl,{action:"zoo_builder_save_template",remove:t.data("tplId"),builder:a.attr("data-builder-id")||"",panel:a.attr("data-builder-panel")||""},function(e){t.remove(),i.find(".list-saved-templates li.saved_template").length<=0&&i.find(".list-saved-templates").removeClass("has-templates")})});p.on("click",".list-saved-templates .saved_template .import-tpl, .list-saved-templates .prebuilt-tpl-item .tpl-thumbnail",function(e){e.preventDefault();var t=top.location.href,i=c(this).parent(),a=i.data("builderId");if(!confirm("Are you sure to install this template?"))return!1;c.post(ajaxurl,{action:"zoo_builder_install_template",tplId:i.data("tplId"),panelId:i.data("builderPanel"),builderId:a},function(e){e.success?-1===t.indexOf("?")?top.location.href=t+"?autofocus[section]="+a+"_templates":(t=-1!==t.indexOf("autofocus[section]=")?t.replace(/autofocus\[section\]=[^&]+/i,"autofocus[section]="+a+"_templates"):t+"&autofocus[section]="+a+"_templates",top.location.href=t):console.log(e)})}),p.on("mouseover",".zoo-customize-builder-row .grid-stack-item",function(e){var t=c(this),i=c(".zoo-customize-builder-item-remove",t).outerWidth()+c(".zoo-customize-builder-item-setting",t).outerWidth();c(".grid-stack-item-content",t).innerWidth()-50<i&&t.addClass("show-tooltip")}),p.on("mouseleave",".zoo-customize-builder-row .grid-stack-item",function(e){c(this).removeClass("show-tooltip")})}(jQuery,window);